(function(e){function t(t){for(var s,c,n=t[0],r=t[1],o=t[2],d=0,p=[];d<n.length;d++)c=n[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);u&&u(t);while(p.length)p.shift()();return l.push.apply(l,o||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],s=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(s=!1)}s&&(l.splice(t--,1),e=c(c.s=a[0]))}return e}var s={},i={password_reset:0},l=[];function c(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=s,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(a,s,function(t){return e[t]}.bind(null,s));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://cdn.jx3box.com/static/account/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var o=0;o<n.length;o++)t(n[o]);var u=r;l.push([3,"chunk-vendors"]),a()})({"0111":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("header",{staticClass:"m-header"},[t("a",{attrs:{href:e.homepage}},[t("svg",{class:"u-logo",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{staticClass:"fil0",attrs:{d:"M129.254 5.842l102.93 59.427-31.87 18.4-.982-.566c.994-2.975-.028-5.876-2.019-8.167l-4.238-4.874-4.875-4.238c-4.609-4.007-11.22-2.951-13.087 3.295l-45.859-26.476-48.092 27.766c-3.008-2.576-6.243-4.596-7.711-5.336.556 3.007 1.122 5.906 1.436 8.959l-16.692 9.637-31.87-18.4L129.254 5.842zM236 71.878v118.854l-102.929 59.426v-36.801l71.059-41.026V90.279L236 71.878zm-110.561 178.28l-102.93-59.426V71.878l31.87 18.401v38.385a71.299 71.299 0 00-9.941 3.888c3.476 1.394 6.816 2.952 9.941 4.768v35.011l13.63 7.87c-.448 5.196-.681 10.447-.884 15.81 7.698-.047 17.263-.298 24.365-2.254l33.949 19.6v36.801zM73.64 189.497c.616-12.288.824-17.667 6.46-25.262 5.453 5.878 11.556 10.552 18.453 13.546a44.686 44.686 0 004.644 1.718c-10.202 9.114-15.093 9.273-29.557 9.998zm55.206-82.269a30.61 30.61 0 00-4.996 4.101c-2.432 2.476-4.35 5.302-5.436 8.228l6.691-6.474c1.381-1.335 2.902-4.048 3.741-5.855zm15.54-14.454c-2.664.429-4.875 1.064-6.833 1.861 2.112.623 4.007 1.195 6.817 2.037l.016-3.898zm15.213-7.165l1.942.821 1.516-1.49a56.852 56.852 0 00-6.694-2.647l3.236 3.316zm-7.44-4.519c-3.687-.918-7.615-1.549-11.775-1.863 2.509-1.954 8.004-2.992 11.839-3.871-6.24-2.525-17.137-2.863-26.058-.017-.495 1.506-1.483 3.868-2.685 4.952-1.586 1.43-3.063 2.694-4.373 3.915 10.1-4.479 20.923-4.799 31.527-1.855l1.525-1.261zM82.1 80.589c1.213 7.898-1.998 20.612-2.61 22.231-.613 1.618-1.421 3.479-4.084 10.137-2.664 6.658-2.451 19.463-.66 23.5-4.342-3.055-9.693-4.784-14.795-2.94 8.582 4.379 13.448 14.094 19.147 21.551 13.089 17.129 29.219 25.133 49.926 19.37 10.231-2.847 25.104-22.701 16.335-30.342-15.181 8.569-31.513-2.404-32.155-19.114-.467-12.171 12.786-24.526 25.65-26.107-5.249-1.572-7.043-2.387-13.788-1.313 6.068-4.449 10.642-7.967 21.017-8.998.637-1.192 1.667-2.01 2.687-2.853-12.985-3.363-31.961-2.924-48.429 18.886 4.904-10.82 8.443-15.182 20.698-27.127 3.233-3.151 2.587-7.771 2.183-10.966-3.448 5.663-9.754 8.745-18.349 12.542-6.518 2.879-12.428 7.647-16.78 13.669-1.091-4.665-2.175-8.865-5.993-12.126zm62.075 89.198a95.605 95.605 0 004.608-2.046c-4.35 7.066-14.86 14.943-33.852 17.435 20.304 5.345 39.698 2.31 51.914-10.359-.979 1.719-1.998 3.546-3.118 5.174 14.984-8.658 34.487-34.111 20.514-58.638 2.36 1.92 4.335 4.253 6.008 7.432.11-11.661-3.429-22.244-10.167-30.625l-3.947 4.018 7.299 7.124-5.446 6.584c-2.667 3.225-4.416 3.231-7.72 3.242l-4.616.018c-.087 1.544-.742 2.979-1.882 4.027l-.072 3.376c-.069 3.225-1.915 6.394-5.122 7.359l.001.005c-3.864 1.15-7.022 3.497-9.786 6.353 1.943 1.713 3.186 3.805 3.841 6.157 1.06 3.809.418 8.087-1.322 12.281-1.663 4.008-4.251 7.851-7.135 11.083zm-25.774-43.979l9.782-9.463c1.993-1.929 4.901-6.745 5.964-10.318.226-.761 1.197-1.434 2.541-1.463l6.485-.139.357-1.122c.196-.616.459-.706 1.011-.709l4.176-.02a.392.392 0 00.379-.39l.037-9.184c.007-1.797-.026-2.719 1.393-3.893l2.944-2.433 7.412 7.594 18.945-18.61 1.185-4.634c.463-1.81 1.741-1.749 3.146-.528l4.538 3.945 3.945 4.538c1.22 1.405 1.282 2.683-.528 3.146l-4.634 1.185-18.611 18.945 7.595 7.412-2.434 2.943c-1.173 1.42-2.096 1.387-3.892 1.394l-9.184.037a.39.39 0 00-.39.379l-.02 4.176c-.003.552-.093.815-.709 1.011l-1.122.358-.139 6.484c-.029 1.344-.703 2.315-1.463 2.541-3.573 1.063-8.389 3.971-10.318 5.964l-5.142 5.316c-5.88 2.918-11.824 2.547-17.096-2.205-3.029-2.731-5.197-6.561-5.943-10.779a20.577 20.577 0 01-.21-1.478z"}})])]),t("el-divider",{staticClass:"u-title"},[e._v("JX3BOX")])],1)},i=[],l=a("65c2"),c={name:"CardHeader",data:function(){return{homepage:l["__Root"]}}},n=c,r=a("2877"),o=Object(r["a"])(n,s,i,!1,null,null,null);t["a"]=o.exports},"10a3":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=a("5c96"),l=a.n(i),c=(a("6b30"),a("c5b4"),a("0af6")),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-card",attrs:{id:"app"}},[t("el-card",{staticClass:"box-card"},[t("CardHeader"),0==e.step?t("main",{staticClass:"m-main"},[t("el-alert",{attrs:{title:"未知异常",type:"error",description:"非法请求或网络异常","show-icon":"",closable:!1}}),t("el-button",{staticClass:"u-button u-submit",attrs:{type:"primary"},on:{click:e.reset}},[e._v("返回")])],1):e._e(),1==e.step?t("main",{staticClass:"m-main"},[t("el-alert",{attrs:{title:"找回密码,请填写绑定的邮箱",type:"warning",closable:!1,"show-icon":""}}),t("div",{staticClass:"u-email"},[t("el-input",{staticClass:"u-text u-email",attrs:{placeholder:"邮箱地址",minlength:"3",maxlength:"50",type:"email"},on:{input:e.checkEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-message"})])],2),t("i",{directives:[{name:"show",rawName:"v-show",value:1==e.email_valid,expression:"email_valid == true"}],staticClass:"el-icon-success u-ok"}),t("div",{staticClass:"u-tip"},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.email_validate,expression:"email_validate == false"}],attrs:{title:e.email_validate_tip,type:"error","show-icon":"",closable:!1}}),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.email_valid,expression:"email_valid == false"}],attrs:{title:e.email_valid_tip,type:"error","show-icon":"",closable:!1}})],1),t("el-button",{staticClass:"u-button",attrs:{type:"primary",disabled:!e.available},on:{click:e.start}},[e._v("下一步")])],1),t("footer",{staticClass:"m-footer"},[t("p",{staticClass:"u-login"},[e._v(" 已有账号? "),t("a",{attrs:{href:"../login"}},[e._v("登录 »")])]),t("p",{staticClass:"u-register"},[t("a",{attrs:{href:"../register"}},[e._v("免费注册")])])])],1):e._e(),2==e.step?t("main",{staticClass:"m-main"},[t("el-alert",{attrs:{title:"请填写邮箱收到的验证码 (60分钟内有效)",type:"success",closable:!1}}),t("div",{staticClass:"u-code"},[t("el-input",{staticClass:"u-text u-code",attrs:{placeholder:"验证码",minlength:"6",maxlength:"6"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-key"})])],2),t("i",{directives:[{name:"show",rawName:"v-show",value:1==e.code_available,expression:"code_available == true"}],staticClass:"el-icon-success u-ok"}),t("div",{staticClass:"u-tip"},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.code_validate,expression:"code_validate == false"}],attrs:{title:e.code_validate_tip,type:"error","show-icon":"",closable:!1}}),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.code_available,expression:"code_available == false"}],attrs:{title:e.code_available_tip,type:"error","show-icon":"",closable:!1}})],1)],1),t("div",{staticClass:"u-pass"},[t("el-input",{staticClass:"u-text",attrs:{placeholder:"新密码","show-password":""},on:{change:e.checkPass},model:{value:e.pwd1,callback:function(t){e.pwd1=t},expression:"pwd1"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-lock"})])],2),t("div",{staticClass:"u-tip"},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.pass_validate,expression:"pass_validate == false"}],attrs:{title:e.pass_validate_tip,type:"error","show-icon":"",closable:!1}})],1)],1),t("div",{staticClass:"u-pass"},[t("el-input",{staticClass:"u-text",attrs:{placeholder:"重复密码","show-password":""},on:{input:e.checkPass},model:{value:e.pwd2,callback:function(t){e.pwd2=t},expression:"pwd2"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-lock"})])],2),t("div",{staticClass:"u-tip"},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.pwd2&&0==e.accordance,expression:"pwd2 && accordance == false"}],attrs:{title:e.pass_accordance_tip,type:"error","show-icon":"",closable:!1}})],1)],1),t("el-button",{staticClass:"u-submit u-button",attrs:{type:"primary",disabled:!e.ready},on:{click:e.done}},[e._v("提交")])],1):e._e(),3==e.step?t("main",{staticClass:"m-main"},[1==e.success?[t("el-alert",{attrs:{title:"重设成功",type:"success",description:"您的密码已重设","show-icon":"",closable:!1}}),t("a",{staticClass:"u-skip el-button u-button el-button--primary",attrs:{href:"../login"}},[e._v("立即登录")])]:e._e(),0==e.success?[t("el-alert",{attrs:{title:"操作失败",type:"error",description:e.failtips,"show-icon":"",closable:!1}}),t("el-button",{staticClass:"u-button u-submit",attrs:{type:"primary"},on:{click:e.reset}},[e._v("返回")])]:e._e()],2):e._e()],1),t("Bottom")],1)},r=[],o=a("0111"),u=a("2777"),d=a("65c2"),p=a("c9d2");function v(e){return u["a"].post("api/cms/user/account/email/forgot-password",{email:e})}function m(e){return u["c"].post(d["__server"]+"account/password/reset/check",{email:e.email,code:e.code})}function h(e){return Object(u["b"])({headers:{"user-device-fingerprint":p["a"].getDeviceFingerprint()}}).put("api/cms/user/account/email/reset-password",{email:e.email,code:e.code,password:e.password})}var f=a("96d9"),_=a("9945"),b=_.validator,w={name:"Password_Reset",data:function(){return{step:1,success:!1,email:"",email_validate:null,email_validate_tip:"邮箱地址格式不正确",email_valid:null,email_valid_tip:"账号不存在",code:"",code_validate:null,code_validate_tip:"验证码格式不正确",code_available:null,code_available_tip:"验证码无效",pwd1:"",pwd2:"",pass_validate:null,pass_validate_tip:"密码有效长度为6-50个字符",pass_accordance_tip:"两次密码不一致",failtips:"",homepage:d["__Root"]}},computed:{available:function(){return this.email_validate&&this.email_valid},accordance:function(){return this.pwd1===this.pwd2},ready:function(){return this.available&&this.pass_validate&&this.accordance}},methods:{checkEmail:function(){var e=this;if(""==this.email)return this.email_validate=null,void(this.email_valid=null);var t=b(this.email,{isEmail:!0,len:[3,50]});this.email_validate=t,t?Object(f["a"])(this.email).then((function(t){var a;e.email_valid=null===(a=t.data.data)||void 0===a?void 0:a.isExist})):this.email_valid=null},checkPass:function(){""==this.pwd1&&(this.pass_validate=null),this.pass_validate=b(this.pwd1,{len:[6,50]})},start:function(){var e=this;v(this.email).then((function(t){t.data.code?(e.$message.error(t.data.msg),e.step=0):e.step=2}))},checkCode:function(){var e=this;if(""==this.code)return this.code_validate=null,void(this.code_available=null);var t=b(this.code,{isAlphanumeric:!0,len:6});this.code_validate=t,t?m({email:this.email,code:this.code}).then((function(t){e.code_available=t.data.data})):this.code_available=null},done:function(){var e=this;h({email:this.email,code:this.code,password:this.pwd1}).then((function(t){e.step=3,t.data.code?(e.failtips=t.data.msg,e.success=!1):e.success=!0})).catch((function(t){e.step=0}))},reset:function(){this.step=1,this.success=null,this.email="",this.email_validate=null,this.email_valid=null,this.code="",this.code_validate=null,this.code_available=null,this.pwd1="",this.pwd2="",this.pass_validate=null}},filters:{},mounted:function(){},components:{CardHeader:o["a"]}},g=w,y=(a("5a9c"),a("2877")),C=Object(y["a"])(g,n,r,!1,null,null,null),x=C.exports;s["default"].config.productionTip=!1,s["default"].use(l.a),s["default"].component("Bottom",c["a"]),new s["default"]({render:function(e){return e(x)}}).$mount("#app")},2777:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return d}));a("d3b7");var s=a("bc3a"),i=a.n(s);a.d(t,"c",(function(){return i.a}));var l=a("c9d2"),c=a("65c2"),n=a("2b0e"),r=a("5c96"),o=i.a.create({withCredentials:!0,headers:{},baseURL:c["__cms"]});function u(e){e["interceptors"]["response"].use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)}))}function d(e){var t=e&&e.domain||c["__cms"],a={withCredentials:!0,baseURL:t,headers:Object.assign({},e.headers||{})},s=i.a.create(a);return u(s),s}setTimeout((function(){o.defaults.headers.common["user-device-fingerprint"]=l["a"].getDeviceFingerprint()}),1500),n["default"].prototype.$message=r["Message"],n["default"].prototype.$notify=r["Notification"],u(i.a),u(o)},3:function(e,t,a){e.exports=a("10a3")},"5a9c":function(e,t,a){"use strict";a("c4c3")},"96d9":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return r}));var s=a("2777"),i=(a("65c2"),a("c9d2"));function l(e){return s["a"].get("api/cms/user/account/email/valid",{params:{email:e}})}function c(e){return Object(s["b"])({headers:{"user-device-fingerprint":i["a"].getDeviceFingerprint()}}).post("api/cms/user/account/email/register",{email:e.email,password:e.pass,invitation:e.invite},{params:{app:"jx3box"}})}function n(e){return Object(s["b"])({headers:{"user-device-fingerprint":i["a"].getDeviceFingerprint()}}).post("api/cms/user/account/email/login",{email:e.email,password:e.pass},{params:{app:"jx3box"}})}function r(e){return s["a"].put("api/cms/user/account/email/active",{token:e.token})}},c4c3:function(e,t,a){}});
//# sourceMappingURL=password_reset.0882843f.js.map